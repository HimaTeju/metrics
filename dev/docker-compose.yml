services:
  backend:
    build: ../backend
    container_name: om_backend
    volumes:
      - ../backend/src:/app/src
    ports:
      - 8000:80
  backend-tools:
    build:
      dockerfile: ../dev/backend-tools-tests/Dockerfile
      context: ../backend
    container_name: om_backend-tools
    volumes:
      - ../backend/src:/app/src
      - ../backend/tasks.py:/app/tasks.py
      - ../backend/tests:/app/tests
    environment:
      DATABASE_URL: sqlite+pysqlite://///app/src/backend/dev.db
      TEST_DATABASE_URL: sqlite+pysqlite://///app/tests/test.db